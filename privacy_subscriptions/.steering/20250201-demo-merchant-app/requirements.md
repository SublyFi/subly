# 要求内容

## 概要

@subly/sdk を使用するモック事業者サブスクリプションアプリを作成し、SDKの使いやすさとオンチェーンでのサブスクリプション検証フローをデモンストレーションする。

## 背景

Subly SDKの開発が完了し、実際の事業者アプリでの使用例を示す必要がある。モックアプリを通じて以下を実証する:
- SDKの簡単な初期セットアップ
- Wallet接続後のプラン選択・契約フロー
- オンチェーンでのサブスクリプション状態検証
- Wallet再接続時の状態復元

## 実装対象の機能

### 1. SDK初期化デモ
- 事業者アプリでのSDK初期化コードを最小限のステップで実装
- 環境変数ベースの設定
- 開発者向けの分かりやすいセットアップ

### 2. Wallet接続機能
- Phantom等のSolana Walletとの接続/切断
- 接続状態の表示
- 複数Wallet対応（wallet-adapter使用）

### 3. サブスクリプションプラン表示
- 3つのデモ用プラン（Basic / Standard / Premium）
- 価格、請求サイクル、特典の表示
- プラン選択UI

### 4. サブスクリプション契約フロー
- プラン選択後の契約確認
- トランザクション署名
- 契約完了通知

### 5. オンチェーン検証デモ
- Wallet再接続時にSDK経由でサブスクリプション状態を検証
- 契約済みプランに応じた画面表示
- 未契約/Active/Cancelled/Expiredの各状態表示

## 受け入れ条件

### SDK初期化
- [ ] 3行以内でSDKが初期化できることを示すコードが存在する
- [ ] 環境変数で設定可能な構成になっている

### Wallet接続
- [ ] ConnectボタンでWalletモーダルが表示される
- [ ] 接続後にWalletアドレスが画面に表示される
- [ ] Disconnectボタンで接続解除できる

### プラン表示・契約
- [ ] 3つのプランがカード形式で表示される
- [ ] 各プランに「Subscribe」ボタンが存在する
- [ ] ボタン押下でWallet署名要求が発生する（モック）
- [ ] 契約完了のトースト通知が表示される

### オンチェーン検証
- [ ] Wallet再接続時に自動で契約状態がチェックされる
- [ ] 契約済みの場合、該当プランの特典画面が表示される
- [ ] 未契約の場合、プラン一覧画面が表示される

## 成功指標

- 開発者がREADMEを読んで5分以内にアプリを起動できる
- ユーザーがWallet接続から契約完了まで3クリック以内で完了できる
- Wallet再接続時に契約状態が即座に反映される

## スコープ外

以下はこのフェーズでは実装しません:

- 実際のオンチェーントランザクション実行（Devnet/Mainnet）
- 実際のArcium MPC暗号化処理
- Deposit/Withdraw機能（User Dashboard側の責務）
- 事業者登録・プラン作成機能（Merchant Dashboard側の責務）
- Clockwork Cron自動支払い
- 本番環境用のエラーハンドリング

## 技術的制約

- モック用事業者アプリとして実装（実際のオンチェーン処理はモック）
- ローカルストレージを使用してサブスクリプション状態を永続化（デモ用）
- デモ用の固定プランデータを使用

## 参照ドキュメント

- `docs/product-requirements.md` - プロダクト要求定義書
- `docs/functional-design.md` - 機能設計書
- `sdk/README.md` - SDK使用方法
